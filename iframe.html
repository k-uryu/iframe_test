<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Iframe Page</title>
<!-- 瓜生サービス tag uryu-z-school.sua.jp p1.ssl-web.jp k-uryu.github.io -->
<script>
  (function (w, d, s, u) {
    // TAG VERSION 1.00
    if (w._wsq_init_flg) {
      return false;
    }
    w._wsq_init_flg = true;
    _wsq = w._wsq || (_wsq = []);
    _wsq.push(['init', u, 1]);
    _wsq.push(['domain', 'uryu-z-school.sua.jp']);
    _wsq.push(['domain', 'p1.ssl-web.jp']);
    _wsq.push(['domain', 'k-uryu.github.io']);
    var a = d.createElement(s); a.async = 1; a.charset='UTF-8'; a.src = 'https://cdn.' + u + '/share/js/tracking.js';
    var b = d.getElementsByTagName(s)[0]; b.parentNode.insertBefore(a, b);
  })(window, document, 'script', 'u3kur.local.test-tetori.link');
</script>
</head>

<body>

<h1>Iframe Page</h1>

<p><a href='https://k-uryu.github.io/iframe_test/iframe_conversion.html'></a></p>

<div id="test"></div>

<button id="postMessage">postMessage</button>

<script>
  document.getElementById('test').innerHTML = (window == window.parent ? 'default' : 'iframe');

  console.log('href: ' + location.href);
  console.log('referrer: ' + document.referrer);
  console.log('cookie: ' + document.cookie);

  document.getElementById('postMessage').addEventListener('click', function (e) {
    window.parent.postMessage('test', document.referrer);
  });
  window.addEventListener('message', function (event) {
    console.log('test from iframe.');
    location.href = location.href + '?test=hoge';
  });
</script>

</body>
</html>
